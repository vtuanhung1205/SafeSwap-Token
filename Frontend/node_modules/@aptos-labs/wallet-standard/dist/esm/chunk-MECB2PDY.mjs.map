{"version":3,"sources":["../../src/features/aptosSignIn.ts"],"sourcesContent":["// Copyright Â© Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Signature } from '@aptos-labs/ts-sdk'\nimport { UserResponse } from '../misc'\nimport { AccountInfo } from '../AccountInfo'\n\n/**\n * AIP: [Sign in with Aptos](https://github.com/aptos-foundation/AIPs/blob/main/aips/aip-116.md)\n */\n\n/** Version of the feature. */\nexport type AptosSignInVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosSignInNamespace = 'aptos:signIn'\n\nexport type AptosSignInFeature = {\n  /** Namespace for the feature. */\n  [AptosSignInNamespace]: {\n    /** Version of the feature API. */\n    version: AptosSignInVersion\n    signIn: AptosSignInMethod\n  }\n}\n\nexport type AptosSignInMethod = (\n  input: AptosSignInInput\n) => Promise<UserResponse<AptosSignInOutput>>\n\n/**\n * Input fields to the `signIn` signing request to the wallet.\n */\nexport type AptosSignInInput = {\n  /**\n   * [`dnsauthority`](https://www.rfc-editor.org/rfc/rfc4501.html) that is requesting the signing.\n   *\n   * @example 'example.com'\n   */\n  domain: string\n  /**\n   * Randomized token to prevent signature replay attacks.\n   */\n  nonce: string\n  /**\n   * Blockchain address performing the signing.\n   *\n   * @example '0x10d7cf502f8571b5b6e402221cafb142547103da9c2847ffcf708f065a78b8d1'\n   */\n  address?: string\n  /**\n   * [URI](https://www.rfc-editor.org/rfc/rfc3986) referring to the resource that is the subject of the signing i.e. the subject of the claim.\n   *\n   * @example 'https://example.com'\n   */\n  uri?: string\n  /**\n   * Current version of the message.\n   *\n   * @example '1'\n   */\n  version?: string\n  /**\n   * Human-readable ASCII assertion that the user will sign. It MUST NOT contain `\\n`.\n   */\n  statement?: string\n  /**\n   * Identifier for the network where the address above lives (e.g., for Aptos mainnet, the identifier would be `aptos:mainnet`)\n   *\n   * @example 'aptos:mainnet'\n   */\n  chainId?: string\n  /**\n   * ISO 8601 [`date-time`](https://datatracker.ietf.org/doc/html/rfc3339#section-5.6) that indicates the issuance time of the message.\n   *\n   * @example '2025-05-23T12:00:00Z'\n   */\n  issuedAt?: string\n  /**\n   * ISO 8601 [`date-time`](https://datatracker.ietf.org/doc/html/rfc3339#section-5.6) that indicates when the signed authentication message is no longer valid.\n   *\n   * @example '2025-05-23T12:00:00Z'\n   */\n  expirationTime?: string\n  /**\n   * ISO 8601 [`date-time`](https://datatracker.ietf.org/doc/html/rfc3339#section-5.6) that indicates when the signed authentication message starts being valid.\n   *\n   * @example '2025-05-23T12:00:00Z'\n   */\n  notBefore?: string\n  /**\n   * System-specific identifier used to uniquely refer to the authentication request.\n   */\n  requestId?: string\n  /**\n   * List of information or references to information the user wishes to have resolved as part of the authentication by the relying party.\n   *\n   * @example ['https://example.com/resource']\n   */\n  resources?: string[]\n}\n\n/**\n * Fields that are bound by the wallet if not provided in the `AptosSignInInput`.\n */\nexport type AptosSignInBoundFields = {\n  /**\n   * @see AptosSignInInput.domain\n   */\n  domain: string\n  /**\n   * @see AptosSignInInput.address\n   */\n  address: string\n  /**\n   * @see AptosSignInInput.uri\n   */\n  uri: string\n  /**\n   * @see AptosSignInInput.version\n   */\n  version: string\n  /**\n   * @see AptosSignInInput.chainId\n   */\n  chainId: string\n}\n\n/**\n * Output fields from the `signIn` signing request to the wallet.\n */\nexport type AptosSignInOutput = {\n  /**\n   * Account information of the user.\n   */\n  account: AccountInfo\n  /**\n   * Input fields to the `signIn` signing request to the wallet. The wallet will ensure that any bound fields not included in the `AptosSignInInput` are included in the output.\n   */\n  input: AptosSignInInput & AptosSignInBoundFields\n  /**\n   * Signature of the SIWA Signing Message constructed from the `input` fields.\n   */\n  signature: Signature\n  /**\n   * The type of signing scheme used to sign the message.\n   *\n   * @example 'ed25519' | 'multi_ed25519' | 'single_key' | 'multi_key'\n   */\n  type: string\n}\n"],"mappings":"AAcO,IAAMA,EAAuB","names":["AptosSignInNamespace"]}